version: "2"

networks:
  mesos-compose:
    driver: bridge

services:
  zk:
    extends:
      file: docker-compose.global.yml
      service: zk
    ports:
      - 2181:2181
    networks:
      - mesos-compose

  mesos-master:
    extends:
      file: docker-compose.global.yml
      service: mesos-master
    networks:
      - mesos-compose
    ports:
      - 5050:5050
    depends_on:
      - zk

  mesos-slave-one:
    extends:
      file: docker-compose.global.yml
      service: mesos-slave
    networks:
      - mesos-compose
    ports:
      - 5051:5051
    depends_on:
      - zk
      - mesos-master

  #mesos-slave-two:
    #extends:
      #file: docker-compose.global.yml
      #service: mesos-slave
    #networks:
      #- mesos-compose
    #ports:
      #- 5052:5050
     #depends_on:
       #- zk

  marathon:
    extends:
      file: docker-compose.global.yml
      service: marathon
    networks:
      - mesos-compose
    expose:
      - "1000-65500"
    ports:
      - 80:80
      - 8080:8080
    depends_on:
      - zk
      - mesos-master
      - mesos-slave-one

  # chronos:
  #   image: mesosphere/chronos:chronos-2.4.0-0.1.20151007110204.ubuntu1404-mesos-0.24.1-0.2.35.ubuntu1404
  #   command: /usr/bin/chronos run_jar --http_port 8888 --master zk://127.0.0.1:2181/mesos --zk_hosts zk://127.0.0.1:2181/mesos
  #   network_mode: bridge
  #   depends_on:
  #     - zk
